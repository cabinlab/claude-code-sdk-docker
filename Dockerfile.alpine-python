# Alpine Python extension - adds Python SDK to Alpine base
# Build Date: 2026-02-11
# Python SDK: Latest version (unpinned) - ~v0.1.35 as of 2026-02-11
# Inherits Claude Agent SDK CLI from base Alpine image

# Build argument for base image (defaults to published alpine image)
ARG BASE_IMAGE=ghcr.io/cabinlab/claude-code-sdk-docker:alpine

# For local builds, build from the local alpine image
# In production, this will use the published alpine image
FROM ${BASE_IMAGE}

# Switch to root for installations
USER root

# Install Python and pip (python3-dev removed for size optimization)
RUN apk add --no-cache \
    python3 \
    py3-pip

# Install Python SDK
RUN pip3 install --no-cache-dir --break-system-packages claude-agent-sdk

# Switch back to claude user
USER claude

# Python environment ready
CMD ["python3"]